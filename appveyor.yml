
environment:
  VSCODE_BUILD_VERBOSE: true
  matrix:
    - nodejs_version: "4"
    - nodejs_version: "7"

version: 0.0.{build}

install:
  - ps: Install-Product node $env:nodejs_version
  - npm install -g npm vsce > log.txt
  - npm install >> log.txt

cache:
  - node_modules

build_script:
  - npm version "0.0.{build}"
  - npm run package

test_script:
  - node --version
  - npm --version
  - npm install -g mocha appveyor-mocha
  - npm test

artifacts:
  - path: '**\*.vsix'

  - path: 'log.txt'
    name: build logs
